<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Location - The EGI v2 guide</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The EGI v2 guide</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="location"><a class="header" href="#location">Location</a></h1>
<p>EGI v2 prefers JSON files to specify the latitude, longitude, and altitude at which the EM27 was positioned.
Unlike version 1, which recommended using coordinate files stored in your <code>EGIPATH</code>, we recommend for version 2
that you place these JSON files alongside your interferograms.
That way, if you package the interferograms to send to another computing system or institution, the necessary
location data goes along with those interferograms.
We do still support the original coordinate file approach, see below for more on that.</p>
<p>For this tutorial, we'll assume that your data will be in a directory structure like this:</p>
<pre><code class="language-text">/
└── data
    └── xx
        ├── 20240401
        │   ├── coords.json
        │   ├── interferograms/
        │   └── met_source.json
        └── 20240402
            ├── coords.json
            ├── interferograms/
            └── met_source.json
</code></pre>
<p>where <code>xx</code> is your site ID. As you can see, the input data is organized by date, and each date has a subfolder containing
the interferograms as well as two JSON files.
We'll create the <code>coords.json</code> files now.
These files can have different formats, but the one we will use here represents a single location.
Since we usually separate our data by day, this format works for all cases where the EM27 was in one location for a given day
(which should be the majority of cases).</p>
<p>These JSON files have the format:</p>
<pre><code class="language-json">{
  "longitude": LONGITUDE_DEG,
  "latitude": LATITUDE_DEG,
  "altitude": ALTITUDE_METERS
}
</code></pre>
<p>where <code>LONGITUDE_DEG</code>, <code>LATITUDE_DEG</code>, and <code>ALTITUDE_METERS</code> must be replaced with numeric values.
EGI uses the convention that west and south are represented as negative values.
Here is a concrete example for an EM27 operated at Caltech, which is at 118.13 W, 34.14 N, and 230 m altitude:</p>
<pre><code class="language-json">
{
  "longitude": -118.13,
  "latitude": 34.14,
  "altitude": 230.0
}
</code></pre>
<p>For this tutorial, we'll assume the EM27 was in the same place for both dates, so we would enter this same information for both files.
If your EM27 is stationed quasi-permanently at one location, you could create one JSON file and symbolically link it to each daily directory.</p>
<p>We will see how these files are used in <a href="./run-i2s.html">Running I2S</a>.</p>
<h2 id="coordinate-file-support"><a class="header" href="#coordinate-file-support">Coordinate file support</a></h2>
<p>If you have coordinate files from EGI v1, you can reuse them by making your <code>coords.json</code> files like so:</p>
<pre><code class="language-json">{
  "site_id": "xx"
}
</code></pre>
<p>Again, "xx" would be replaced with the site ID for these interferograms.
This tells EGI v2 to look for a coordinate file at <code>$EGIPATH/coordinates/xx_dlla.dat</code>.
The coordinate files have the format:</p>
<pre><code class="language-text">2   6
Date     UTCTime   Latitude  Longitude  Alt_masl  Descrip_opt
20140601 01:30:00   35.1431  -116.1042      237    Zzyxx (testing)
20140613 17:34:00   34.1362  -118.1269      237    Caltech
20140613 17:34:32   34.1361  -118.1269      237    CaltechB
20140628 18:55:05   34.1362  -118.1269      237    Caltech
20140628 18:55:30   35.1431  -116.1042      237    Zzyxx (testing)
</code></pre>
<p>where:</p>
<ul>
<li>the first line gives the number of header lines (2) and the number of columns (6) - the number of columns is ignored by EGI v2,</li>
<li>"Date" and "UTCTime" give the starting date/time for these coordinates.
<ul>
<li>"UTCTime" is optional, if omitted.... TODO</li>
</ul>
</li>
<li>"Latitude" and "Longitude" give the coordinates, with south and west represented as negative,</li>
<li>"Alt_masl" is the meters above sea level for this measurement, and</li>
<li>"Descrip_opt" is an optional, human-readable location description (not read by EGI)</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="installation.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="igm-met.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="installation.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="igm-met.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
